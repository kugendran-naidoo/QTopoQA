{
  "edge_schema": {
    "dim": 11,
    "module": "edge/legacy_band/v11",
    "variant": "legacy_v11",
    "module_params": {
      "distance_max": 10.0,
      "distance_min": 0.0,
      "jobs": 16,
      "scale_features": true
    },
    "source": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/graph_data/graph_metadata.json",
    "alias": "10D atomic distances between two residues + 1D distance between C (alpha) = Edge 11D | TopoQA",
    "jobs": 16,
    "summary": "11-D legacy edge features (distance + atom distance histogram)."
  },
  "node_schema": {
    "columns": [
      "rasa",
      "phi",
      "psi",
      "SS8_0",
      "SS8_1",
      "SS8_2",
      "SS8_3",
      "SS8_4",
      "SS8_5",
      "SS8_6",
      "SS8_7",
      "AA_0",
      "AA_1",
      "AA_2",
      "AA_3",
      "AA_4",
      "AA_5",
      "AA_6",
      "AA_7",
      "AA_8",
      "AA_9",
      "AA_10",
      "AA_11",
      "AA_12",
      "AA_13",
      "AA_14",
      "AA_15",
      "AA_16",
      "AA_17",
      "AA_18",
      "AA_19",
      "AA_20",
      "base.lap_num_nodes",
      "base.lap_eig_01",
      "base.lap_eig_02",
      "base.lap_eig_03",
      "base.lap_eig_04",
      "base.lap_eig_05",
      "base.lap_eig_06",
      "base.lap_eig_07",
      "base.lap_eig_08",
      "base.lap_eig_09",
      "base.lap_eig_10",
      "base.lap_eig_11",
      "base.lap_eig_12",
      "base.lap_eig_13",
      "base.lap_eig_14",
      "base.lap_eig_15",
      "base.lap_eig_16",
      "base.lap_lambda_min",
      "base.lap_lambda_max",
      "base.lap_lambda_2",
      "base.lap_lambda_mean",
      "base.lap_lambda_var",
      "base.lap_spectral_radius",
      "base.lap_condition_guarded",
      "base.lap_entropy",
      "base.lap_moment_k1",
      "base.lap_moment_k2",
      "base.lap_moment_k3",
      "base.lap_moment_k4",
      "base.lap_heat_t0_1",
      "base.lap_heat_t1_0",
      "base.lap_heat_t5_0",
      "base.present",
      "base.n_residues",
      "base.log1p_n_residues",
      "base.reason_present",
      "base.reason_missing_slot",
      "base.reason_empty_subset",
      "base.reason_guardrail_skip",
      "base.reason_timeout",
      "base.reason_error",
      "primary.s0.lap_num_nodes",
      "primary.s0.lap_eig_01",
      "primary.s0.lap_eig_02",
      "primary.s0.lap_eig_03",
      "primary.s0.lap_eig_04",
      "primary.s0.lap_eig_05",
      "primary.s0.lap_eig_06",
      "primary.s0.lap_eig_07",
      "primary.s0.lap_eig_08",
      "primary.s0.lap_eig_09",
      "primary.s0.lap_eig_10",
      "primary.s0.lap_eig_11",
      "primary.s0.lap_eig_12",
      "primary.s0.lap_eig_13",
      "primary.s0.lap_eig_14",
      "primary.s0.lap_eig_15",
      "primary.s0.lap_eig_16",
      "primary.s0.lap_lambda_min",
      "primary.s0.lap_lambda_max",
      "primary.s0.lap_lambda_2",
      "primary.s0.lap_lambda_mean",
      "primary.s0.lap_lambda_var",
      "primary.s0.lap_spectral_radius",
      "primary.s0.lap_condition_guarded",
      "primary.s0.lap_entropy",
      "primary.s0.lap_moment_k1",
      "primary.s0.lap_moment_k2",
      "primary.s0.lap_moment_k3",
      "primary.s0.lap_moment_k4",
      "primary.s0.lap_heat_t0_1",
      "primary.s0.lap_heat_t1_0",
      "primary.s0.lap_heat_t5_0",
      "primary.s0.present",
      "primary.s0.n_residues",
      "primary.s0.log1p_n_residues",
      "primary.s0.reason_present",
      "primary.s0.reason_missing_slot",
      "primary.s0.reason_empty_subset",
      "primary.s0.reason_guardrail_skip",
      "primary.s0.reason_timeout",
      "primary.s0.reason_error",
      "primary.s1.lap_num_nodes",
      "primary.s1.lap_eig_01",
      "primary.s1.lap_eig_02",
      "primary.s1.lap_eig_03",
      "primary.s1.lap_eig_04",
      "primary.s1.lap_eig_05",
      "primary.s1.lap_eig_06",
      "primary.s1.lap_eig_07",
      "primary.s1.lap_eig_08",
      "primary.s1.lap_eig_09",
      "primary.s1.lap_eig_10",
      "primary.s1.lap_eig_11",
      "primary.s1.lap_eig_12",
      "primary.s1.lap_eig_13",
      "primary.s1.lap_eig_14",
      "primary.s1.lap_eig_15",
      "primary.s1.lap_eig_16",
      "primary.s1.lap_lambda_min",
      "primary.s1.lap_lambda_max",
      "primary.s1.lap_lambda_2",
      "primary.s1.lap_lambda_mean",
      "primary.s1.lap_lambda_var",
      "primary.s1.lap_spectral_radius",
      "primary.s1.lap_condition_guarded",
      "primary.s1.lap_entropy",
      "primary.s1.lap_moment_k1",
      "primary.s1.lap_moment_k2",
      "primary.s1.lap_moment_k3",
      "primary.s1.lap_moment_k4",
      "primary.s1.lap_heat_t0_1",
      "primary.s1.lap_heat_t1_0",
      "primary.s1.lap_heat_t5_0",
      "primary.s1.present",
      "primary.s1.n_residues",
      "primary.s1.log1p_n_residues",
      "primary.s1.reason_present",
      "primary.s1.reason_missing_slot",
      "primary.s1.reason_empty_subset",
      "primary.s1.reason_guardrail_skip",
      "primary.s1.reason_timeout",
      "primary.s1.reason_error",
      "pair.s0_s1.lap_num_nodes",
      "pair.s0_s1.lap_eig_01",
      "pair.s0_s1.lap_eig_02",
      "pair.s0_s1.lap_eig_03",
      "pair.s0_s1.lap_eig_04",
      "pair.s0_s1.lap_eig_05",
      "pair.s0_s1.lap_eig_06",
      "pair.s0_s1.lap_eig_07",
      "pair.s0_s1.lap_eig_08",
      "pair.s0_s1.lap_eig_09",
      "pair.s0_s1.lap_eig_10",
      "pair.s0_s1.lap_eig_11",
      "pair.s0_s1.lap_eig_12",
      "pair.s0_s1.lap_eig_13",
      "pair.s0_s1.lap_eig_14",
      "pair.s0_s1.lap_eig_15",
      "pair.s0_s1.lap_eig_16",
      "pair.s0_s1.lap_lambda_min",
      "pair.s0_s1.lap_lambda_max",
      "pair.s0_s1.lap_lambda_2",
      "pair.s0_s1.lap_lambda_mean",
      "pair.s0_s1.lap_lambda_var",
      "pair.s0_s1.lap_spectral_radius",
      "pair.s0_s1.lap_condition_guarded",
      "pair.s0_s1.lap_entropy",
      "pair.s0_s1.lap_moment_k1",
      "pair.s0_s1.lap_moment_k2",
      "pair.s0_s1.lap_moment_k3",
      "pair.s0_s1.lap_moment_k4",
      "pair.s0_s1.lap_heat_t0_1",
      "pair.s0_s1.lap_heat_t1_0",
      "pair.s0_s1.lap_heat_t5_0",
      "pair.s0_s1.present",
      "pair.s0_s1.n_residues",
      "pair.s0_s1.log1p_n_residues",
      "pair.s0_s1.reason_present",
      "pair.s0_s1.reason_missing_slot",
      "pair.s0_s1.reason_empty_subset",
      "pair.s0_s1.reason_guardrail_skip",
      "pair.s0_s1.reason_timeout",
      "pair.s0_s1.reason_error"
    ],
    "dim": 196,
    "source": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/graph_data/graph_metadata.json",
    "module": "node/dssp_topo_merge_passthrough/v1",
    "module_params": {
      "drop_na": true,
      "jobs": 16
    }
  },
  "module_registry": {
    "edge": {
      "alias": "10D atomic distances between two residues + 1D distance between C (alpha) = Edge 11D | TopoQA",
      "defaults": {
        "distance_max": 10.0,
        "distance_min": 0.0,
        "jobs": 16,
        "scale_features": true
      },
      "description": "Reproduces the original 11-dimensional edge attributes consisting of residue pair distance and a 10-bin histogram of inter-atomic distances, scaled to [0, 1].",
      "id": "edge/legacy_band/v11",
      "inputs": [
        "interface_residues",
        "pdb_structure"
      ],
      "jobs": 16,
      "kind": "edge",
      "notes": {},
      "outputs": [
        "edge_index",
        "edge_attr"
      ],
      "parameters": {
        "distance_max": "Maximum interface C\u03b1 distance (\u00c5) to include an edge.",
        "distance_min": "Minimum interface C\u03b1 distance (\u00c5) to include an edge.",
        "jobs": "Optional override for edge assembly worker count.",
        "scale_features": "Apply MinMax scaling across edge features."
      },
      "summary": "11-D legacy edge features (distance + atom distance histogram).",
      "module": "edge/legacy_band/v11",
      "params": {
        "distance_max": 10.0,
        "distance_min": 0.0,
        "jobs": 16,
        "scale_features": true
      }
    },
    "interface": {
      "alias": "residue ID + 3D coordinates (x,y,z) default cutoff 10A | TopoQA",
      "defaults": {
        "coordinate_decimals": -1,
        "cutoff": 10.0,
        "jobs": 16
      },
      "description": "Identifies interface residues across chains using the polar interface routine (new_calculate_interface.process_pdb_file) with configurable distance cutoff and coordinate rounding.",
      "id": "interface/polar_cutoff/v1",
      "inputs": [
        "pdb_file"
      ],
      "jobs": 16,
      "kind": "interface",
      "notes": {},
      "outputs": [
        "interface_file"
      ],
      "parameters": {
        "coordinate_decimals": "Decimal places for coordinate rounding in output files (-1 skips rounding).",
        "cutoff": "Distance cutoff in \u00c5 for interface residue detection.",
        "jobs": "Optional override for parallel worker count."
      },
      "summary": "Polar interface detection using distance cutoff. ID + coords for downstream stages"
    },
    "node": {
      "alias": "Passthrough (all dims from topology module) + 32D DSSP = Node Dynamic Dims",
      "defaults": {
        "drop_na": true,
        "jobs": 16
      },
      "description": "Runs DSSP/basic feature extraction and merges with the provided topology CSV using all non-ID topology columns (no hardcoded list). Topology columns are MinMax scaled per file; output columns ordered as ID, DSSP/basic 32D, then topology columns in file order. Suitable for hybrid topology (PH+Lap) or any dynamic topo layout.",
      "id": "node/dssp_topo_merge_passthrough/v1",
      "inputs": [
        "pdb_file",
        "interface_file",
        "topology_csv"
      ],
      "jobs": 16,
      "kind": "node",
      "notes": {},
      "outputs": [
        "node_csv"
      ],
      "parameters": {
        "drop_na": "Drop rows containing NA values after merging.",
        "jobs": "Optional override for thread worker count."
      },
      "summary": "DSSP/basic features merged with all topology columns (passthrough).",
      "module": "node/dssp_topo_merge_passthrough/v1",
      "params": {
        "drop_na": true,
        "jobs": 16
      }
    },
    "topology": {
      "alias": "Laplacian-only k-partite 164D (Lean)",
      "defaults": {
        "dssp_slow_threshold": 2.0,
        "dssp_timeout_seconds": 10.0,
        "fail_fast_topology_dim": false,
        "jobs": 16,
        "k_max": 2,
        "lap_distance_cutoff": null,
        "lap_edge_weight": "gaussian",
        "lap_eigs_count": 16,
        "lap_graph_mode": "cross_chain",
        "lap_graph_mode_primary": "all",
        "lap_heat_times": [
          0.1,
          1.0,
          5.0
        ],
        "lap_include_entropy": true,
        "lap_k_neighbors": null,
        "lap_max_neighbors": 128,
        "lap_moment_orders": [
          1,
          2,
          3,
          4
        ],
        "lap_normalize": "sym",
        "lap_sigma": null,
        "max_atoms": 25000,
        "max_block_seconds": 60.0,
        "max_topology_dim_allowed": null,
        "neighbor_distance": 8.0,
        "preset": "lean",
        "secondary_k_max": 4,
        "secondary_partition": "none",
        "write_slot_maps": false
      },
      "description": "Computes Laplacian spectral features on the bipartite interface graph, expanded into fixed-width k-partite slots (base, per-primary, per-pair, and optional stratified). Slots are padded deterministically and include missingness channels for robust downstream training.",
      "id": "topology/persistence_k_partite_advanced_laplacian_only/v2",
      "inputs": [
        "pdb_file",
        "interface_file"
      ],
      "jobs": 16,
      "kind": "topology",
      "notes": {
        "lap_feature_dim_default": 32,
        "schema_version": "k_partite_advanced_lap_only_v2_fixed_width",
        "slot_missingness_dim": 9
      },
      "outputs": [
        "topology_csv"
      ],
      "parameters": {
        "dssp_slow_threshold": "Log DSSP calls exceeding this time (s).",
        "dssp_timeout_seconds": "Timeout for DSSP calls (heavy_stratified only).",
        "fail_fast_topology_dim": "If true, raise error when expected worst-case topo_dim exceeds limit; otherwise warn only.",
        "jobs": "Optional override for parallel worker count.",
        "k_max": "Number of primary slots (chains) in fixed schema; missing slots padded.",
        "lap_distance_cutoff": "\u00c5 radius for Laplacian neighborhood (defaults to neighbor_distance).",
        "lap_edge_weight": "Edge weighting: gaussian (default), inverse, or binary.",
        "lap_eigs_count": "Number of smallest nonzero eigenvalues to keep (padded).",
        "lap_graph_mode": "Graph mode for base/pair blocks: cross_chain (default) or all.",
        "lap_graph_mode_primary": "Graph mode for per-primary blocks (default: all).",
        "lap_heat_times": "List of heat kernel times to emit traces for.",
        "lap_include_entropy": "Include spectral entropy over nonzero eigenvalues.",
        "lap_k_neighbors": "Optional deterministic k-NN cap for Laplacian neighborhood.",
        "lap_max_neighbors": "Cap on Laplacian neighborhood size (includes target residue).",
        "lap_moment_orders": "List of spectral moment orders to emit.",
        "lap_normalize": "sym (default symmetric normalized) or rw (random-walk) Laplacian.",
        "lap_sigma": "Sigma for Gaussian edge weights (defaults to neighbor_distance/2).",
        "max_atoms": "Guardrail: if atom_count > max_atoms, stratified blocks are padded.",
        "max_block_seconds": "Time cap per block; on timeout, slot is padded with reason_timeout.",
        "max_topology_dim_allowed": "Optional safety: warn/fail if expected worst-case topo_dim exceeds this limit.",
        "neighbor_distance": "Interface neighborhood radius in \u00c5 (also Laplacian cutoff default).",
        "preset": "minimal|lean|heavy|heavy_stratified",
        "secondary_k_max": "Max secondary classes used (DSSP fixed 3-state; chemotype fixed 4-class).",
        "secondary_partition": "none|dssp|chemotype (heavy_stratified only).",
        "write_slot_maps": "If true, write work/topology_slot_maps/<pdb_id>.slot_map.json for debugging."
      },
      "summary": "Laplacian-only k-partite topology with fixed-width slots.",
      "module": "topology/persistence_k_partite_advanced_laplacian_only/v2",
      "params": {
        "dssp_slow_threshold": 2.0,
        "dssp_timeout_seconds": 10.0,
        "fail_fast_topology_dim": false,
        "jobs": 16,
        "k_max": 2,
        "lap_distance_cutoff": 8.0,
        "lap_edge_weight": "gaussian",
        "lap_eigs_count": 16,
        "lap_graph_mode": "cross_chain",
        "lap_graph_mode_primary": "all",
        "lap_heat_times": [
          0.1,
          1.0,
          5.0
        ],
        "lap_include_entropy": true,
        "lap_k_neighbors": null,
        "lap_max_neighbors": 128,
        "lap_moment_orders": [
          1,
          2,
          3,
          4
        ],
        "lap_normalize": "sym",
        "lap_sigma": 4.0,
        "max_atoms": 25000,
        "max_block_seconds": 60.0,
        "max_topology_dim_allowed": null,
        "neighbor_distance": 8.0,
        "preset": "lean",
        "secondary_k_max": 4,
        "secondary_partition": "none",
        "write_slot_maps": false
      }
    }
  },
  "metadata_path": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/graph_data/graph_metadata.json",
  "summary_path": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/model_training2/training_runs2/exhaustive_sched_boost_lr001_lean_seed222_2026-01-10_14-29-01_phase1/schema_summary.json",
  "notes": [],
  "sample_graph": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/graph_data/19HC/19HC.pt",
  "sample_edge_count": 40,
  "sample_node_count": 10,
  "builder": {
    "command": [
      "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/graph_builder2.py",
      "--pdb-warnings",
      "--no-sort-artifacts",
      "--dataset-dir",
      "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/datasets/training/adjusted/Dockground_MAF2",
      "--work-dir",
      "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/work",
      "--graph-dir",
      "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/graph_data",
      "--log-dir",
      "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/logs_output/lap_lean_10A_ARM",
      "--jobs",
      "16",
      "--feature-config",
      "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/feature_configs/advanced_k_partite_lap_only_v2/feature-config.yaml.advanced_lap_only_v2_lean.10A"
    ],
    "edge_dumps": {
      "configured_directory": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/work/edge_features",
      "enabled": true,
      "output_directory": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/work/edge_features"
    },
    "feature_config": {
      "path": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/feature_configs/advanced_k_partite_lap_only_v2/feature-config.yaml.advanced_lap_only_v2_lean.10A",
      "sha256": "e95ea03cfa35ab7123d9354d2d028a58fdeebc52d24e07de657c62e9cf581450",
      "text": "# Auto-generated feature-config template\n# Pick one module per required stage. Edit parameter values as needed.\n# Run `./run_graph_builder2.sh --list-modules` for detailed descriptions.\ndefaults:\n  jobs: 16  # Optional global worker override; remove if unused.\n\noptions:\n  topology_round_decimals: -1  # Round topology numeric columns to N decimals (0-15); -1 or omit to disable (recommended 12 when enabling).\n\n# REQUIRED stage: interface\ninterface:\n  module: interface/polar_cutoff/v1  # alias: TopoQA default 10A cut-off\n  alias: \"residue ID + 3D coordinates (x,y,z) default cutoff 10A | TopoQA\"\n  summary: \"Polar interface detection using distance cutoff.\"\n  description: \"Identifies interface residues across chains using the polar interface routine (new_calculate_interface.process_pdb_file) with configurable distance cutoff and coordinate rounding.\"\n  params:\n    cutoff: 10.0\n    coordinate_decimals: -1  # skip rounding to keep raw coords\n    jobs: 16\n\n# OPTIONAL stage: topology\ntopology:\n  module: topology/persistence_k_partite_advanced_laplacian_only/v2\n  alias: \"Laplacian-only k-partite 164D (Lean)\"\n  summary: \"Laplacian-only k-partite topology with fixed-width slots.\"\n  description: \"Computes Laplacian spectral features on the bipartite interface graph, expanded into fixed-width k-partite slots (base, per-primary, per-pair, and optional stratified). Slots are padded deterministically and include missingness channels for robust downstream training.\"\n  # dim: 164\n  params:\n    preset: lean  # lean (default): base + per-primary + per-pair slots\n    neighbor_distance: 8.0\n    lap_graph_mode: cross_chain  # cross_chain (default) for base/pair blocks; all includes intra-chain edges\n    lap_graph_mode_primary: all  # all (default) for per-primary blocks; cross_chain enforces bipartite-only\n    lap_distance_cutoff: 8.0\n    lap_k_neighbors: null  # optional deterministic k-NN cap; otherwise cutoff-based\n    lap_max_neighbors: 128  # cap neighborhood size (includes target residue)\n    lap_edge_weight: gaussian  # gaussian (default, sigma ~ neighbor_distance/2), inverse, or binary\n    lap_sigma: 4.0\n    lap_eigs_count: 16\n    lap_moment_orders: [1, 2, 3, 4]\n    lap_heat_times: [0.1, 1.0, 5.0]\n    lap_include_entropy: true\n    lap_normalize: sym\n    k_max: 2  # Number of primary slots (chains) in fixed schema; missing slots padded with reason_missing_slot\n    secondary_partition: none  # ignored for lean\n    secondary_k_max: 4  # ignored for lean\n    max_atoms: 25000  # Guardrail: if atom_count > max_atoms, stratified blocks padded with reason_guardrail_skip\n    max_block_seconds: 60.0  # Time cap per block; on timeout, slot is padded with reason_timeout\n    dssp_timeout_seconds: 10.0\n    dssp_slow_threshold: 2.0\n    write_slot_maps: false  # If true, write work/topology_slot_maps/<pdb_id>.slot_map.json for debugging\n    max_topology_dim_allowed: null  # Optional safety: warn/fail if expected worst-case topo_dim exceeds this limit\n    fail_fast_topology_dim: false  # If true, raise error when expected worst-case topo_dim exceeds limit; otherwise warn only\n    jobs: 16\n\n# REQUIRED stage: node\nnode:\n  module: node/dssp_topo_merge_passthrough/v1  # alias: Passthrough (all dims from topology module) + 32D DSSP = Node Dynamic Dims\n  alias: \"Passthrough (all dims from topology module) + 32D DSSP = Node Dynamic Dims\"\n  summary: \"DSSP/basic features merged with all topology columns (passthrough).\"\n  description: \"Runs DSSP/basic feature extraction and merges with the provided topology CSV using all non-ID topology columns (no hardcoded list). Topology columns are MinMax scaled per file; output columns ordered as ID, DSSP/basic 32D, then topology columns in file order. Suitable for hybrid topology (PH+Lap) or any dynamic topo layout.\"\n  params:\n    drop_na: true  # matches fea_df_clean = fea_df.dropna() in both inference_model.py and k_mac_inference_pca_tsne4.py\n    jobs: 16\n\n# REQUIRED stage: edge\nedge:\n  module: edge/legacy_band/v11\n  alias: \"10D atomic distances between two residues + 1D distance between C (alpha) = Edge 11D | TopoQA\"\n  summary: \"11D legacy edge features (distance + atom distance histogram).\"\n  description: \"Reproduces the original 11-dimensional edge attributes consisting of residue pair distance and a 10-bin histogram of inter-atomic distances, scaled to [0, 1].\"\n  params:\n    distance_min: 0.0\n    distance_max: 10.0\n    scale_features: true\n    jobs: 16\n"
    },
    "id": "graph_builder2",
    "module": "qtdaqa.new_dynamic_features.graph_builder2.graph_builder2",
    "options": {
      "default_jobs": 16,
      "edge_dump": true,
      "topology_round_decimals": -1
    },
    "schema_version": 1,
    "version": "2.0.0"
  },
  "topology_schema": {
    "module": "topology/persistence_k_partite_advanced_laplacian_only/v2",
    "module_params": {
      "dssp_slow_threshold": 2.0,
      "dssp_timeout_seconds": 10.0,
      "fail_fast_topology_dim": false,
      "jobs": 16,
      "k_max": 2,
      "lap_distance_cutoff": 8.0,
      "lap_edge_weight": "gaussian",
      "lap_eigs_count": 16,
      "lap_graph_mode": "cross_chain",
      "lap_graph_mode_primary": "all",
      "lap_heat_times": [
        0.1,
        1.0,
        5.0
      ],
      "lap_include_entropy": true,
      "lap_k_neighbors": null,
      "lap_max_neighbors": 128,
      "lap_moment_orders": [
        1,
        2,
        3,
        4
      ],
      "lap_normalize": "sym",
      "lap_sigma": 4.0,
      "max_atoms": 25000,
      "max_block_seconds": 60.0,
      "max_topology_dim_allowed": null,
      "neighbor_distance": 8.0,
      "preset": "lean",
      "secondary_k_max": 4,
      "secondary_partition": "none",
      "write_slot_maps": false
    },
    "source": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/output/lap_lean_10A_ARM/graph_data/graph_metadata.json",
    "dim": 164
  },
  "topology_schema_spec": {},
  "feature_config": {
    "path": "/Volumes/PData/Data/Dev/Github/Repos/phd3/qtopo/QTopoQA/qtdaqa/new_dynamic_features/graph_builder2/feature_configs/advanced_k_partite_lap_only_v2/feature-config.yaml.advanced_lap_only_v2_lean.10A",
    "sha256": "e95ea03cfa35ab7123d9354d2d028a58fdeebc52d24e07de657c62e9cf581450",
    "text": "# Auto-generated feature-config template\n# Pick one module per required stage. Edit parameter values as needed.\n# Run `./run_graph_builder2.sh --list-modules` for detailed descriptions.\ndefaults:\n  jobs: 16  # Optional global worker override; remove if unused.\n\noptions:\n  topology_round_decimals: -1  # Round topology numeric columns to N decimals (0-15); -1 or omit to disable (recommended 12 when enabling).\n\n# REQUIRED stage: interface\ninterface:\n  module: interface/polar_cutoff/v1  # alias: TopoQA default 10A cut-off\n  alias: \"residue ID + 3D coordinates (x,y,z) default cutoff 10A | TopoQA\"\n  summary: \"Polar interface detection using distance cutoff.\"\n  description: \"Identifies interface residues across chains using the polar interface routine (new_calculate_interface.process_pdb_file) with configurable distance cutoff and coordinate rounding.\"\n  params:\n    cutoff: 10.0\n    coordinate_decimals: -1  # skip rounding to keep raw coords\n    jobs: 16\n\n# OPTIONAL stage: topology\ntopology:\n  module: topology/persistence_k_partite_advanced_laplacian_only/v2\n  alias: \"Laplacian-only k-partite 164D (Lean)\"\n  summary: \"Laplacian-only k-partite topology with fixed-width slots.\"\n  description: \"Computes Laplacian spectral features on the bipartite interface graph, expanded into fixed-width k-partite slots (base, per-primary, per-pair, and optional stratified). Slots are padded deterministically and include missingness channels for robust downstream training.\"\n  # dim: 164\n  params:\n    preset: lean  # lean (default): base + per-primary + per-pair slots\n    neighbor_distance: 8.0\n    lap_graph_mode: cross_chain  # cross_chain (default) for base/pair blocks; all includes intra-chain edges\n    lap_graph_mode_primary: all  # all (default) for per-primary blocks; cross_chain enforces bipartite-only\n    lap_distance_cutoff: 8.0\n    lap_k_neighbors: null  # optional deterministic k-NN cap; otherwise cutoff-based\n    lap_max_neighbors: 128  # cap neighborhood size (includes target residue)\n    lap_edge_weight: gaussian  # gaussian (default, sigma ~ neighbor_distance/2), inverse, or binary\n    lap_sigma: 4.0\n    lap_eigs_count: 16\n    lap_moment_orders: [1, 2, 3, 4]\n    lap_heat_times: [0.1, 1.0, 5.0]\n    lap_include_entropy: true\n    lap_normalize: sym\n    k_max: 2  # Number of primary slots (chains) in fixed schema; missing slots padded with reason_missing_slot\n    secondary_partition: none  # ignored for lean\n    secondary_k_max: 4  # ignored for lean\n    max_atoms: 25000  # Guardrail: if atom_count > max_atoms, stratified blocks padded with reason_guardrail_skip\n    max_block_seconds: 60.0  # Time cap per block; on timeout, slot is padded with reason_timeout\n    dssp_timeout_seconds: 10.0\n    dssp_slow_threshold: 2.0\n    write_slot_maps: false  # If true, write work/topology_slot_maps/<pdb_id>.slot_map.json for debugging\n    max_topology_dim_allowed: null  # Optional safety: warn/fail if expected worst-case topo_dim exceeds this limit\n    fail_fast_topology_dim: false  # If true, raise error when expected worst-case topo_dim exceeds limit; otherwise warn only\n    jobs: 16\n\n# REQUIRED stage: node\nnode:\n  module: node/dssp_topo_merge_passthrough/v1  # alias: Passthrough (all dims from topology module) + 32D DSSP = Node Dynamic Dims\n  alias: \"Passthrough (all dims from topology module) + 32D DSSP = Node Dynamic Dims\"\n  summary: \"DSSP/basic features merged with all topology columns (passthrough).\"\n  description: \"Runs DSSP/basic feature extraction and merges with the provided topology CSV using all non-ID topology columns (no hardcoded list). Topology columns are MinMax scaled per file; output columns ordered as ID, DSSP/basic 32D, then topology columns in file order. Suitable for hybrid topology (PH+Lap) or any dynamic topo layout.\"\n  params:\n    drop_na: true  # matches fea_df_clean = fea_df.dropna() in both inference_model.py and k_mac_inference_pca_tsne4.py\n    jobs: 16\n\n# REQUIRED stage: edge\nedge:\n  module: edge/legacy_band/v11\n  alias: \"10D atomic distances between two residues + 1D distance between C (alpha) = Edge 11D | TopoQA\"\n  summary: \"11D legacy edge features (distance + atom distance histogram).\"\n  description: \"Reproduces the original 11-dimensional edge attributes consisting of residue pair distance and a 10-bin histogram of inter-atomic distances, scaled to [0, 1].\"\n  params:\n    distance_min: 0.0\n    distance_max: 10.0\n    scale_features: true\n    jobs: 16\n"
  },
  "feature_config_sha256": "e95ea03cfa35ab7123d9354d2d028a58fdeebc52d24e07de657c62e9cf581450"
}