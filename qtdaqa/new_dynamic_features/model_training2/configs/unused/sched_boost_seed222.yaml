# paths.* values are resolved relative to this file; mlflow.tracking_uri uses MLflow's cwd (repo root).
paths:
  train_labels: ./data.train.csv
  val_labels: ./data.validate.csv
  save_dir: ./training_runs2
model:
  pooling_type: mean
  attention_head: 8
  # self_loops: false
  # self_loop_fill: mean   # mean|0.0
  # residual: false
dataloader:
  batch_size: 16
  num_workers: 0
  seed: 222
selection:
  primary_metric: val_loss
trainer:
  accelerator: cpu
  devices: 1
  precision: 32
  num_epochs: 260
  accumulate_grad_batches: 16
  use_val_spearman_as_secondary: true
  spearman_secondary_weight: 1.0       # default 1.0, 0=false, make it 0.25â€“0.5 if secondary metric causes premature stopping
optimizer:
  learning_rate: 0.005
scheduler:
  factor: 0.2
  patience: 6
  type: reduce_on_plateau
early_stopping:
  patience: 45
mlflow:
  enabled: true
  tracking_uri: ./qtdaqa/new_dynamic_features/model_training2/ml_runs2
  experiment: dynamic_topoqa
  log_artifacts: true

# Optional: tuning slice used for ranking-style selection (kept separate from val_loss).
# tuning:
#   labels: ./data.tuning.csv
#   eval_every: 1
#   max_samples: 512
#   fraction: 0.1
#
# Optional: ranking-aware loss (pairwise hinge/logistic). Defaults disabled.
# ranking_loss:
#   weight: 0.0
#   margin: 0.0
#   mode: hinge   # hinge|logistic
#   grouped: true
#
# Optional: variance-reduced checkpointing via top-K averaging.
# variance_reduction:
#   enabled: false
#   method: topk_avg
#   top_k: 3

# edge/topology overrides are optional: the loader already consumes the recorded metadata from graph_metadata.json
# (see feature_metadata.module_registry). Only define this block when you deliberately need to override the stored values.
# Tip: run `python -m qtdaqa.new_dynamic_features.common.feature_inspector <graph_dir> --emit-override-block`
# or `python qtdaqa/new_dynamic_features/model_training2/tools/emit_override_block.py <graph_dir>` to print a ready-to-paste snippet.
# edge_schema:  # edge metadata override (uncomment and tweak only the keys you need)
# topology_schema:  # topology metadata override
coverage:
  fail_on_missing: false
  minimum_percent: 0
